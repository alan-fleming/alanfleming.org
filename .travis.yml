language: ruby
rvm:
- 2.6
script:
- bundle exec jekyll build
- bundle exec htmlproofer ./_site --disable-external --empty-alt-ignore
before_deploy:
- openssl aes-256-cbc -K $encrypted_db2095f63ba3_key -iv $encrypted_db2095f63ba3_iv
  -in deploy_rsa.enc -out deploy_rsa -d
- chmod 600 /tmp/deploy_rsa
- eval "$(ssh-agent -s)"
- ssh-add /tmp/deploy_rsa
- echo -e "Host $DEPLOY_HOST\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
env:
  global:
  - NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - secure: hX0ZAbuKN/c7XYOzW4L2+mQqtkY4fVz8jvGjdhaPQyZSTfM/ckTtwQ0Jjh0QVEE0DDkL0Rv20p+YAo4ooMc9tZPsL4C6TGMDgtnwe+BBAFxzG0N19MvmD089GRI/F63wiVgB4WzVVq9OlxuEpkRPfov78q+ydF+Am3n1AEIHtYLEDKzYVQKZUzvvD4jWSXUgEyx9hszZ5Xr97mac2v3nkwKMeqcsOwHjv9CsTN72qWZjMG0fUTlfbjeOoFQRaejNZcD88kVQDcvEpA+27s4R5dvHrBMuAD672khe0Dzso4ROT9YSO61Vb/xTHF3CtVlJZBlS/56K/wcVdlRENm4fuVSS5V/nwGHK1iYpeRx6xv1hFmOOc47chnjn26UpUfPrLdd6donzIfa/KbU3+4lM6WBclt9S5JMh6xCvlAiwxJuux7HtyGTdXS/FWBjhScHvNjSsmkpn2iNmS0baFISF3KOSjiYbpG35RnrMD4o6PV4o9benQNcyCb1IAOyvdDsDjXgTjBiU0qGx5laZS3/fSkys+RcF9JviWe6T5wW+y2AIl5D65asiuCO6/QXWPW8ihoDxU7U9ycRx7oCcuebt5scL4mVH07g/A8bL5f/fVqH3V6G38KgxEuzw9OWWaEkmJtOSTlX2sg7xx8QREWXP9GeXKMAZcHLPVmz6CNvtqXM=
  - secure: jrN45oOEZ2O+phOTz6oWoUdiHTlE7lKUzKbfsNpBcPFnFlFmBxmLM8bIx/yy0TKfCsXLo4i6RtdXOd8wQC9Ym99lvK4kcAr1sPt0LuiOUy13LcRFlJYVU3NkJpISDbi83ePI2gFt53tfeYk7eHoBBvECvvqrvyxuOBZxCn+IyW26gq7hQAU3HUFvRkIUEkqpqnrAjkKQhvAVP4Wyy7wxW8N4mp9cP0gZQp/DroH1OjY3NruDeOuX6DrPBJm1fM4gjcxIKUhGa4pZhHDqGnzhffRgnW9sUvo4VRW1qEFJ9E4phC9bhLhbK4jD7pKwMjFfIgX9+kGtgnZxL+H77AhTgZwweqkFQC8tilTGjKdN4Z2Z5j6q/OeU1AbRA34SDVDvd+Zq1aBxas9grhqbDVhxWNQPYZpiGkZrvLaqmQa9nM5Odh/xNbhSnNE4QPAOQig4tdhKC3QROml1AwBT15oq9k/ZKzUIrKnsTkzAtigTU8sG0suQfkCuLlq/Ol9Ra27wbjL6S0zLshi8KSoaGj9QaIDG1LVeNNdYZSEgdJLdJrmlyhibb5fCDns8/PxQt3qlaoww7bvXo1bc5Ur3ipEVyNvnslr89/566MKfKj7HAv1QMAwDKreeIogso4NF5bdjMVCMAneekDXR9Y3PO0fPM34dBsyBMZJM3MnkqmgwlZE=
  - secure: HXtcvGLOVNLcrAoKSiHoJJzKYdO9z/W5k4A1GoNBfEpMJKloepeAuKb8AiAQCJ2LCenIsVpKv8wsgQOS2mJcg1x947pGTz97UnodF/23O+FZkTU0msm5vlfCmF4YtFhoCYg+XQX+g0zcG9TCi4nI+O2cNd3/2dyU9xstMdIO+DhiGK7of72pHJ1JJ1NwY/jNqLtUWiYYeoLf8T/4M3IMAsparAffkr7lyqQ0qBRPQUrpR1Te0eerw+5gUYqVcCqmDA2YpQV51gX02Sw40moUN1pROOKy/GrIEStq/iCu6FdCruBaYKENxNYm/CqxDw0VCvlgX4GZ1vZT1PAJTjWAKKjCFcfXU8zMGnqJ1DQtFJyjFAtzQ4tNHwQw4LlvJOzt/eCSF/B49VJ9v4I+Z9kZ7ngAybah2w9ok5dTRtl0BJErd/xFBaW9UOz65POn8P4bXCXF8U6cr6v/Opu3O9NYgZ3zEHQhAZqK3WB4Ad/r8xQ24toH83Fs3z/MGZ9bVsSVkHtTW5WrlEYEVvCHU/W6SASbF6+FH79XB6cPaD8xSepPCgcBThxygFW4u0MvXbVai13B6SCAWKPAuQi4+YOE5o3jtNVCIFK5+h+Vgdumhx0jpzIQl95eq/D6YwgzcLEqpC9+pxlz/QSArEWqJBUELbXRkY7zp7FLZ3v89uj6mEo=
  - secure: mQmnkdJ3EzDU0x5ZEh1gn0yWSOQWxQXCwZnj0mCphwuHZuCDhWzvIECaibGbh10HM+MzvXRe31/3y/TfxumS/7Qx1vqTUrLlzuUMVlXu0Iqpt1mc9vlg3pAdadYvSO97u5R4jEWu4Z2YAzESMfHpiaSaGoIPuUIfkj2K93/d2pyvuCYCSHgDcnxK6B9MQdIJ0VA+8I3NU0Jo9pEU7d3qRnIjhk/LPv/w1KkZ3DVvzJy8mX3ytTNqb3J7Xym3DiKfLAswhBtgx2YquI2R/5ZnET2GZGrzbOJMe5ijx3BtC73Rn8mS9zAnEX5zjnw8gdRfOmQ0E3PvgQ2hOxkOJQUPDbyQSXxruDmFEGj/PgCUH84/sff+98dNCNwU2hBVLpz/MwjLUt8B8l20AQscYdkeCsATphNY2gyWxpYfFnYusBnVDQ6K+/qdxuj2b0YkUJDo0/yTNX/LDM/dM7i1p/nyNeNU/p2ocMiR1oO1FUx4zyrvGiNAfeMjVkTPOCayoMZjrPm9nRNW9nCSIsVJ3QRXbfOI4KvB3cLmo7Nc5WMRCxpdoil9I5v/KhTZ16y6+zIX9Xeq8tHTsrwE/mNHg9kot/YSdBKetjTgrNBpKPuCsQp+pbHjauMV8s6v4UrRblvVfX/5ZG0garo4CfNjgZd8TzfYcDNMsBkWkOPWHqhf6+U=
  deploy: 
  provider: script
  skip_cleanup: true
  script: rsync -r --quiet -e 'ssh -p $DEPLOY_PORT' _site/ $DEPLOY_USER@$DEPLOY_HOST:$DEPLOY_DIRECTORY
    --delete-after
  on:
    branch: master
